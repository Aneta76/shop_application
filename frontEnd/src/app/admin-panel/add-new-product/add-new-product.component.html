<form class="form-inline my-2 my-lg-0" name="form" (ngSubmit)="f.form.valid && addNewProduct()" #f="ngForm" novalidate>
  <div class="container">
    <div *ngIf="isNew()">
      <h1>Add new product</h1>
    </div>
    <div *ngIf="!isNew()">
      <h1>Edit product</h1>
    </div>
    <table>
      <tr class="form-field">
        <td><b>Id : </b></td>
        <td><input class="form-control" type="text" [(ngModel)]="product.id" name="Id" [readonly]="true"
                   placeholder="Id"></td>
      </tr>
      <tr class="form-field">
        <td><b>Name : </b></td>
        <td><input class="form-control" type="text" [(ngModel)]="product.name" name="name"
                   placeholder="Name" #name="ngModel" [ngClass]="{ 'is-invalid': f.submitted && name.invalid }"
                   required/>
          <div *ngIf="f.submitted && name.invalid" class="invalid-feedback">
            <div *ngIf="name.errors.required">Name is required</div>
          </div>
        </td>
      </tr>
      <tr class="form-field">
        <td><b>Price : </b></td>
        <td>
          <input class="form-control" type="text" [(ngModel)]="product.price" name="price"
                 placeholder="Price" #price="ngModel" [ngClass]="{ 'is-invalid': f.submitted && price.invalid }"
                 required/>
          <div *ngIf="f.submitted && price.invalid" class="invalid-feedback">
            <div *ngIf="price.errors.required">Price is required</div>
          </div>
        </td>
      </tr>
      <tr class="form-field">
        <td><b>Description : </b></td>
        <td><input class="form-control" type="text" [(ngModel)]="product.description" name="description"
                   placeholder="Description" #description="ngModel"
                   [ngClass]="{ 'is-invalid': f.submitted && description.invalid }" required/>
          <div *ngIf="f.submitted && description.invalid" class="invalid-feedback">
            <div *ngIf="description.errors.required">Description is required</div>
          </div>
        </td>
      </tr>
      <tr class="form-field">
        <td><b>Category : </b></td>
        <td>
          <select class="form-control" [(ngModel)]="product.category.id" name="productCategory" #productCategory="ngModel"
                  [ngClass]="{ 'is-invalid': f.submitted && productCategory.invalid, 'valid-data': productCategory.valid && f.submitted}" required>
            <option [ngValue]="null"></option>
            <option *ngFor="let category of categories" [value]="category.id">{{category.name}}</option>
          </select>
          <div *ngIf="f.submitted && productCategory.invalid" class="invalid-feedback">
            <div *ngIf="productCategory.errors.required">Product category is required</div>
          </div>
        </td>
      </tr>
    </table>
  </div>
  <div *ngIf="isNew(); else isOld">
    <button type="submit" class="btn btn-outline-success my-4 mx-3">Add product
    </button>
  </div>
  <div>
    <ng-template #isOld>
      <button type="submit" class="btn btn-outline-success my-4 mx-3">
        Save changes
      </button>
    </ng-template>
  </div>
</form>
